<privacy-popup bind:agree="agree" bind:disagree="disagree"></privacy-popup>
<!-- <view> -->
<!-- 头像上传部分 -->
<!-- <view class="avatar-section">
  <button class="avatar-wrapper" open-type="chooseAvatar" bind:chooseavatar="onChooseAvatar">
    <image class="avatar" src="{{avatarUrl}}"></image>
  </button>
  <text class="avatar-tip">点击上方录入头像</text>
</view> -->

<!-- 通用表单部分 -->
<!-- <view class="form-section"> -->
<!-- 昵称输入 -->
<!-- <t-input class="nickname_input" placeholder="点击获取微信名" label="昵称" type="nickname" value="{{value}}" bind:change="nameInput" bindtap="getUserGender" bind:focus="nameFocus" />  -->

<!-- 性别选择 -->
<!-- <view class="form-item">
  <view class="gender-section">
    <text class="gendertxt" style="position:relative ; left: 2rpx;">性别</text>
    <t-cell class="gender_input" arrow hover note="{{genderText}}" bind:click="onGenderPicker" />
    <t-picker visible="{{genderVisible}}" value="{{genderValue}}" data-key="gender" title="选择性别" cancelBtn="取消" confirmBtn="确认" bindchange="onPickerChange" bindcancel="onPickerCancel">
      <t-picker-item options="{{genders}}" />
    </t-picker>
  </view>
</view> -->

<!-- </view> -->

<!-- 注册方式切换 -->
<view class="register-switch">
  <text wx:if="{{RegWay === 'shouji'}}" bindtap="toggleRegisterType" class="phone-tip {{isPhoneRegister ? 'phone-tip-active' : ''}}" data-type="phone">手机号登录</text>
  <!-- <text wx:if="{{RegWay === 'shouji'}}" bindtap="toggleRegisterType" class="phone-tip {{isEmailRegister ? 'phone-tip-active' : ''}}" data-type="email">邮箱登录</text> -->
  <!-- <text class="switch-item" bindtap="toggleRegisterType" data-type="phone" wx:if="{{!isPhoneRegister && !isPhoneRegister}}">手机号注册</text> -->
  <text wx:if="{{RegWay === 'youxiang'}}" class="phone-tip" data-type="email">子账号注册</text>
  <!-- <text class="switch-item" bindtap="toggleRegisterType" data-type="back" wx:if="{{isPhoneRegister || isEmailRegister}}">返回微信注册</text> -->
</view>

<!-- 手机注册部分 -->
<view wx:if="{{RegWay === 'shouji'}}" class="phone-register">
  <!-- <view class="phone-tip">手机号注册</view> -->
  <block wx:if="{{isPhoneRegister}}">
    <view class="agreement-fixed">
      <checkbox checked="{{agreed}}" bindtap="toggleAgreement" />
      <text>我已阅读并同意《</text>
      <text class="link" bindtap="goToAgreement">用户协议</text>
      <text>》《</text>
      <text class="link" bindtap="goToPrivacy">隐私协议</text>
      <text>》</text>
    </view>
    <button wx:if="{{agreed}}" id="getPhoneBtn" class="phone-btn" open-type="getPhoneNumber" bindgetphonenumber="getPhoneNumber">
      手机号一键注册登录
    </button>
    <button wx:else class="phone-btn" bind:tap="handleGetPhone">
      手机号一键注册登录
    </button>

    <!-- <button wx:if="{{agreed}}" id="getUserBtn" class="user-btn" open-type="getUserInfo" bindgetuserinfo="getUserNumber">
      账号注册登录
    </button>
    <button wx:else class="user-btn" bind:tap="handleGetUser">
      账号注册登录
    </button> -->
    <text class="rejectGetPhone" bind:tap="rejectGetPhone">不同意就返回</text>
  </block>
  <block wx:else>
    <view class="email-register">
      <view class="form-item">
        <input class="email-input" placeholder="请输入邮箱" value="{{email}}" bindinput="onEmailInput" />
      </view>
      <!-- <view class="form-item">
        <input class="email-input" placeholder="请输入密码" value="{{password}}" bindinput="onPasswordInput" />
      </view> -->
      <view class="agreement-fixed">
        <checkbox checked="{{agreed}}" bindtap="toggleAgreement" />
        <text>我已阅读并同意《</text>
        <text class="link" bindtap="goToAgreement">用户协议</text>
        <text>》《</text>
        <text class="link" bindtap="goToPrivacy">隐私协议</text>
        <text>》</text>
      </view>
      <button class="phone-btn" bind:tap="handleEmailLogin">
        登录
      </button>
    </view>
  </block>
</view>

<!-- 邮箱注册部分 -->
<view class="phone-register">
  <view wx:if="{{RegWay === 'youxiang'}}" class="email-register">
    <view class="form-item">
      <input class="email-input" placeholder="请输入帐号名" value="{{email}}" bindinput="onEmailInput" />
    </view>
    <!-- <view class="form-item code-item">
      <input class="code-input" placeholder="请输入验证码" value="{{code}}" bindinput="onCodeInput" />
      <button class="code-btn" disabled="{{countdown > 0}}" bindtap="getVerificationCode">
        {{countdown > 0 ? countdown + 's后重试' : '获取验证码'}}
      </button>
    </view> -->
    <view class="agreement-fixed">
      <checkbox checked="{{agreed}}" bindtap="toggleAgreement" />
      <text>我已阅读并同意《</text>
      <text class="link" bindtap="goToAgreement">用户协议</text>
      <text>》《</text>
      <text class="link" bindtap="goToPrivacy">隐私协议</text>
      <text>》</text>
    </view>
  </view>
  <!-- 提交按钮 -->
  <view class="submit-section" wx:if="{{RegWay === 'youxiang'}}">
    <view class="shengqin_botton1" hover-class="shengqin_botton2" bindtap="submit">提交</view>
  </view>
</view>